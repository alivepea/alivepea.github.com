---
layout: post
title: 内核驱动－I2C子系统
category: kernel
keywords: [kernel, driver, i2c]
description: I2C子系统剖析
---

## {{ page.title }}

> "如果你只给我看流程图，不给我看你的数据结构表,我可能还是很困惑；
> 如果你给我看了你的数据结构表，流程图有些时候并不重要，流程太明显了"
> -- Frederick P. Brook

`I2C`总线常用于板间IC通讯。智能设备的`SOC`大多集成了`I2C`控制器，以连接各种外围器件如摄像头、触摸屏、PMU、sensors等。`I2C`总线可谓是*busybus*。内核的`I2C`子系统为此提供了驱动支持。

### 子系统做了啥
`I2C`子系统代码在内核[^1]中视图。

* **建立模型**

  根据`I2C`的总线的特征，分别用`i2c_adapter`/`i2c_driver`/`i2c_client`表征 `控制器/i2c驱动/i2c设备`

* **注册到设备模型**

* **提供接口**

### 数据结构

### 接口

### 内核魔法

{% include post_date.span %}
~EOF~

* * * * *
[^1]: 本文分析的内核为`linux-3.4.0`
